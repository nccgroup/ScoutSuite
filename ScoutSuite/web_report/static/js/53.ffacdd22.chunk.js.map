{"version":3,"sources":["partials/gcp/computeengine.projects.id.networks.id/index.js","components/InformationsWrapper/index.js","api/useResources.js"],"names":["renderInstances","items","map","item","i","service","resource","id","name","Networks","props","data","get","useResources","firewalls","firewallLoading","loading","instanceList","useMemo","instances","instance_id","instancesLoading","label","valuePath","renderValue","formatDate","title","path","InformationsWrapper","children","className","ids","useState","setData","setLoading","useEffect","a","requests","API","Promise","all","response","console","info","error","message","asyncAPI"],"mappings":"qNA+BMA,EAAkB,SAAAC,GACtB,OACE,6BACGA,EAAMC,KAAI,SAACC,EAAMC,GAAP,OACT,6BACE,cAAC,IAAD,CACEC,QAAQ,gBACRC,SAAS,YACTC,GAAIJ,EAAKI,GACTC,KAAML,EAAKK,MACNL,EAAKI,KANLH,SAoFFK,UAlEE,SAAAC,GAAU,IAxCHT,EAyCdU,EAASD,EAATC,KACFR,EAAOS,IAAID,EAAM,CAAC,QAAS,IAFT,EAI8BE,YACpD,gBACA,YACAV,EAAKW,WAHOA,EAJU,EAIhBH,KAA0BI,EAJV,EAICC,QAKnBC,EAAeC,mBACnB,kBACEf,EAAKgB,UACDhB,EAAKgB,UAAUjB,KAAI,qBAAGkB,eACtB,KACN,CAACjB,IAdqB,EAgB+BU,YACrD,gBACA,YACAI,GAHYE,EAhBU,EAgBhBR,KAA0BU,EAhBV,EAgBCL,QAMzB,OAAKL,EAGH,eAAC,IAAD,CAASA,KAAMA,EAAf,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAcW,MAAM,OAAOC,UAAU,SAErC,cAAC,IAAD,CAAcD,MAAM,KAAKC,UAAU,OAEnC,cAAC,IAAD,CAAcD,MAAM,aAAaC,UAAU,eAE3C,cAAC,IAAD,CAAcD,MAAM,cAAcC,UAAU,gBAE5C,cAAC,IAAD,CACED,MAAM,gBACNC,UAAU,qBACVC,YAAaC,MAGf,cAAC,IAAD,CAAcH,MAAM,cAAcC,UAAU,mBAI9C,eAAC,IAAD,WACE,cAAC,IAAD,CAASG,MAAM,iBAAf,SACE,eAAC,IAAD,CAAgBC,KAAK,YAArB,WAvFc1B,EAwFKa,EAtFzB,6BACGb,EAAMC,KAAI,SAACC,EAAMC,GAAP,OACT,6BACE,cAAC,IAAD,CACEC,QAAQ,gBACRC,SAAS,YACTC,GAAIJ,EAAKI,GACTC,KAAML,EAAKK,MACNL,EAAKI,KANLH,SAqFJW,GAAmB,cAAC,IAAD,SAIxB,cAAC,IAAD,CAASW,MAAM,2BAAf,SACE,eAAC,IAAD,CAAgBC,KAAK,YAArB,UACG3B,EAAgBmB,GAChBE,GAAoB,cAAC,IAAD,eAlCb,O,wDCnDLO,IAda,SAAAlB,GAAU,IAC5BmB,EAAanB,EAAbmB,SAER,OACE,sBAAKC,UAAU,uBAAf,UACE,oBAAIA,UAAU,QAAd,0BACCD,O,6ICTMhB,EAAe,SAACR,EAASC,EAAUyB,GAAS,IAAD,EAC9BC,mBAAS,IADqB,mBAC/CrB,EAD+C,KACzCsB,EADyC,OAExBD,oBAAS,GAFe,mBAE/ChB,EAF+C,KAEtCkB,EAFsC,KAwBtD,OApBAC,qBAAU,YACM,uCAAG,8BAAAC,EAAA,2DACX/B,GAAWC,GAAYyB,GADZ,wBAEbG,GAAW,GAFE,SAILG,EAAWN,EAAI7B,KAAI,SAAAK,GAAE,OACzB+B,IAAA,mBAAoBjC,EAApB,sBAAyCC,EAAzC,YAAqDC,OAL5C,SAOYgC,QAAQC,IAAIH,GAPxB,OAOLI,EAPK,OAQXC,QAAQC,KAAK,wBAAyBtC,EAASC,EAAUyB,EAAKU,GAC9DR,EAAQQ,GATG,kDAWXC,QAAQE,MAAM,KAAEC,SAXL,QAabX,GAAW,GAbE,0DAAH,qDAgBdY,KACC,CAACf,IAEG,CACLpB,OACAK","file":"static/js/53.ffacdd22.chunk.js","sourcesContent":["import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\nimport { Partial, PartialValue } from '../../../components/Partial';\nimport { partialDataShape, formatDate } from '../../../utils/Partials';\nimport { TabPane, TabsMenu } from '../../../components/Tabs';\nimport PartialSection from '../../../components/Partial/PartialSection/index';\nimport { useResources } from '../../../api/useResources';\nimport InformationsWrapper from '../../../components/InformationsWrapper';\nimport ResourceLink from '../../../components/ResourceLink/index';\n\nconst renderFirewalls = items => {\n  return (\n    <ul>\n      {items.map((item, i) => (\n        <li key={i}>\n          <ResourceLink\n            service=\"computeengine\"\n            resource=\"firewalls\"\n            id={item.id}\n            name={item.name}\n            key={item.id}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst renderInstances = items => {\n  return (\n    <ul>\n      {items.map((item, i) => (\n        <li key={i}>\n          <ResourceLink\n            service=\"computeengine\"\n            resource=\"instances\"\n            id={item.id}\n            name={item.name}\n            key={item.id}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst propTypes = {\n  data: PropTypes.shape(partialDataShape).isRequired,\n};\n\nconst Networks = props => {\n  const { data } = props;\n  const item = get(data, ['item'], {});\n\n  const { data: firewalls, loading: firewallLoading } = useResources(\n    'computeengine',\n    'firewalls',\n    item.firewalls,\n  );\n  const instanceList = useMemo(\n    () =>\n      item.instances\n        ? item.instances.map(({ instance_id }) => instance_id)\n        : [],\n    [item],\n  );\n  const { data: instances, loading: instancesLoading } = useResources(\n    'computeengine',\n    'instances',\n    instanceList,\n  );\n\n  if (!data) return null;\n\n  return (\n    <Partial data={data}>\n      <InformationsWrapper>\n        <PartialValue label=\"Name\" valuePath=\"name\" />\n\n        <PartialValue label=\"ID\" valuePath=\"id\" />\n\n        <PartialValue label=\"Project ID\" valuePath=\"project_id\" />\n\n        <PartialValue label=\"Description\" valuePath=\"description\" />\n\n        <PartialValue\n          label=\"Creation Date\"\n          valuePath=\"creation_timestamp\"\n          renderValue={formatDate}\n        />\n\n        <PartialValue label=\"Legacy Mode\" valuePath=\"legacy_mode\" />\n\n      </InformationsWrapper>\n\n      <TabsMenu>\n        <TabPane title=\"Firewall Rules\">\n          <PartialSection path=\"firewalls\">\n            {renderFirewalls(firewalls)}\n            {firewallLoading && <Skeleton />}\n          </PartialSection>\n        </TabPane>\n\n        <TabPane title=\"Compute Engine Instances\">\n          <PartialSection path=\"instances\">\n            {renderInstances(instances)}\n            {instancesLoading && <Skeleton />}\n          </PartialSection>\n        </TabPane>\n      </TabsMenu>\n    </Partial>\n  );\n};\n\nNetworks.propTypes = propTypes;\n\nexport default Networks;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './style.scss';\n\n\nconst propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nconst InformationsWrapper = props => {\n  const { children } = props;\n\n  return (\n    <div className=\"informations-wrapper\">\n      <h4 className=\"title\">Informations</h4>\n      {children}\n    </div>\n  );\n};\n\n\nInformationsWrapper.propTypes = propTypes;\n\nexport default InformationsWrapper;\n","import { useEffect, useState } from 'react';\nimport * as API from './api';\n\n/**\n * React Hook to fetch API data and re-render the component\n * @param {*} path\n */\nexport const useResources = (service, resource, ids) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const asyncAPI = async () => {\n      if (service && resource && ids) {\n        setLoading(true);\n        try {\n          const requests = ids.map(id =>\n            API.get(`services/${service}/resources/${resource}/${id}`),\n          );\n          const response = await Promise.all(requests);\n          console.info('useResources response', service, resource, ids, response);\n          setData(response);\n        } catch (e) {\n          console.error(e.message);\n        }\n        setLoading(false);\n      }\n    };\n    asyncAPI();\n  }, [ids]);\n\n  return {\n    data,\n    loading,\n  };\n};\n"],"sourceRoot":""}